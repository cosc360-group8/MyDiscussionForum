<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/form.css">

    <script type="text/javascript">
        window.onload = function(){
            var form = document.getElementById('signup_form');
            form.onsubmit = function(e){
                if(checkReqFields(event)){
                    checkPasswordsMatch(event);
                }
                //alert('hi');
            }
        }

        // function to check field validity
        function checkReqFields(event){
            var username = document.getElementById('username');
            var firstname = document.getElementById('firstname');
            var lastname = document.getElementById('lastname');
            var email = document.getElementById('email');
            var password = document.getElementById('password');
            var password_check = document.getElementById('password-check');
            
            // creating an array of required fields to check field validity
            var required_fields = [username, email, password, password_check];
            for(var i = 0; i < required_fields.length; i++){
                if(required_fields[i].value.length == 0){  // if a field is empty
                    required_fields[i].classList.add('invalid');
                    alert('One or more fields are empty');
                    event.preventDefault();
                    return false;
                }        
            }
            return true;    // all fields are valid
        }

        // function to check if passwords match
        function checkPasswordsMatch(event){
            var password = document.getElementById('password');
            var password_check = document.getElementById('password-check');
            if(password.value.localeCompare(password_check.value) != 0){    // both the strings are not equal
                password.classList.add('invalid');
                password_check.classList.add('invalid');
                alert('Passwords don\'t match');
                event.preventDefault();
            } 
        }

    </script>
</head>
<body>
    <nav>
        <div class="logo">
            <h4>MDF&reg;</h4>
        </div> 
        <ul class="nav-links">
            <li>
                <a href="#">Home</a>
            </li>
            <li>
                <a href="#">Create Post</a>
            </li>
            <li>
             <a href="#">Profile</a>
            </li>
            <li>
             <a href="#">Settings</a>
            </li>
        </ul>
        <div class="burger">
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div>
    </nav>

    <div class="forum-logo">
        <h1>MDF&reg;</h1>
    </div> 
    
    <main class="flex-container">
        <div class="form-list">
            <form class="forms" id="signup_form" action="../api/user/create.php" method="POST">
                <h1>Sign up</h1>

                <div class="input-fields">
                    <input type="text" id="firstname" name="firstname" placeholder="First name"><br>
                </div>

                <div class="input-fields">
                    <input type="text" id="lastname" name="lastname" placeholder="Last name"><br>
                </div>

                <div class="input-fields">
                    <input type="text" id="username" name="username" placeholder="username"><br>
                </div>

                <div class="input-fields">
                    <input type="email" id="email" name="email" placeholder="email"><br>
                </div>

                <div class="input-fields">
                    <input type="password" id="password" name="password" placeholder="password"><br>
                </div>

                <div class="input-fields">
                    <input type="password" id="password-check" name="password-check" placeholder="re-enter password"><br>
                </div>
               
                <div style="text-align: center;">
                <input class="buttons" type="submit" value="Create">  
                </div>        
                
                <div style="text-align: center; font-size: 15px;">
                    <p>Already a Member? Login <a href="./login.html">here</a></p>
                </div>
            </form>           
        </div>
    </main>
</body>
</html>